variant: flatcar 
version: 1.0.0
systemd:
  units:
    - name: flatcar-install.service
      enabled: true
      contents: |
        [Unit]
        Description=Flatcar Container Linux Installation

        [Service]
        Type=oneshot
        ExecStart=/root/flatcar-install.sh

        [Install]
        WantedBy=multi-user.target
storage:
  links:
    - filesystem: "root"
      path: "/etc/systemd/system/multi-user.target.wants/flatcar-install.service"
      target: "/etc/systemd/system/flatcar-install.service"
  files:
    - path: /root/flatcar-install.sh
      mode: 700
      contents:
        inline: |
          #!/bin/sh

          /usr/bin/curl -L https://raw.githubusercontent.com/buttahtoast/ignition/main/production.json -o ignition.json
          /usr/bin/flatcar-install -s -C stable -i ./ignition.json
          /usr/sbin/reboot
